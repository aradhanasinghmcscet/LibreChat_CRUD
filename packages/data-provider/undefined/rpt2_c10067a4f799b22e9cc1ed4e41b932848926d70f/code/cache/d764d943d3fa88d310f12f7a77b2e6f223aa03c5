{"code":"var _a, _b;\nimport { __assign } from \"tslib\";\nimport dayjs from 'dayjs';\nimport { ContentTypes } from './types/runs';\nimport { openAISchema, googleSchema, EModelEndpoint, anthropicSchema, assistantSchema, gptPluginsSchema, \n// agentsSchema,\ncompactAgentsSchema, compactGoogleSchema, compactPluginsSchema, compactAssistantSchema, } from './schemas';\nimport { bedrockInputSchema } from './bedrock';\nimport { alternateName } from './config';\nvar endpointSchemas = (_a = {},\n    _a[EModelEndpoint.openAI] = openAISchema,\n    _a[EModelEndpoint.azureOpenAI] = openAISchema,\n    _a[EModelEndpoint.custom] = openAISchema,\n    _a[EModelEndpoint.google] = googleSchema,\n    _a[EModelEndpoint.anthropic] = anthropicSchema,\n    _a[EModelEndpoint.gptPlugins] = gptPluginsSchema,\n    _a[EModelEndpoint.assistants] = assistantSchema,\n    _a[EModelEndpoint.azureAssistants] = assistantSchema,\n    _a[EModelEndpoint.agents] = compactAgentsSchema,\n    _a[EModelEndpoint.bedrock] = bedrockInputSchema,\n    _a);\n// const schemaCreators: Record<EModelEndpoint, (customSchema: DefaultSchemaValues) => EndpointSchema> = {\n//   [EModelEndpoint.google]: createGoogleSchema,\n// };\n/** Get the enabled endpoints from the `ENDPOINTS` environment variable */\nexport function getEnabledEndpoints() {\n    var _a;\n    var defaultEndpoints = [\n        EModelEndpoint.openAI,\n        EModelEndpoint.agents,\n        EModelEndpoint.assistants,\n        EModelEndpoint.azureAssistants,\n        EModelEndpoint.azureOpenAI,\n        EModelEndpoint.google,\n        EModelEndpoint.chatGPTBrowser,\n        EModelEndpoint.gptPlugins,\n        EModelEndpoint.anthropic,\n        EModelEndpoint.bedrock,\n    ];\n    var endpointsEnv = (_a = process.env.ENDPOINTS) !== null && _a !== void 0 ? _a : '';\n    var enabledEndpoints = defaultEndpoints;\n    if (endpointsEnv) {\n        enabledEndpoints = endpointsEnv\n            .split(',')\n            .filter(function (endpoint) { return endpoint.trim(); })\n            .map(function (endpoint) { return endpoint.trim(); });\n    }\n    return enabledEndpoints;\n}\n/** Orders an existing EndpointsConfig object based on enabled endpoint/custom ordering */\nexport function orderEndpointsConfig(endpointsConfig) {\n    if (!endpointsConfig) {\n        return {};\n    }\n    var enabledEndpoints = getEnabledEndpoints();\n    var endpointKeys = Object.keys(endpointsConfig);\n    var defaultCustomIndex = enabledEndpoints.indexOf(EModelEndpoint.custom);\n    return endpointKeys.reduce(function (accumulatedConfig, currentEndpointKey) {\n        var isCustom = !(currentEndpointKey in EModelEndpoint);\n        var isEnabled = enabledEndpoints.includes(currentEndpointKey);\n        if (!isEnabled && !isCustom) {\n            return accumulatedConfig;\n        }\n        var index = enabledEndpoints.indexOf(currentEndpointKey);\n        if (isCustom) {\n            accumulatedConfig[currentEndpointKey] = __assign({ order: defaultCustomIndex >= 0 ? defaultCustomIndex : 9999 }, endpointsConfig[currentEndpointKey]);\n        }\n        else if (endpointsConfig[currentEndpointKey]) {\n            accumulatedConfig[currentEndpointKey] = __assign(__assign({}, endpointsConfig[currentEndpointKey]), { order: index });\n        }\n        return accumulatedConfig;\n    }, {});\n}\n/** Converts an array of Zod issues into a string. */\nexport function errorsToString(errors) {\n    return errors\n        .map(function (error) {\n        var field = error.path.join('.');\n        var message = error.message;\n        return \"\".concat(field, \": \").concat(message);\n    })\n        .join(' ');\n}\nexport function getFirstDefinedValue(possibleValues) {\n    var returnValue;\n    for (var _i = 0, possibleValues_1 = possibleValues; _i < possibleValues_1.length; _i++) {\n        var value = possibleValues_1[_i];\n        if (value) {\n            returnValue = value;\n            break;\n        }\n    }\n    return returnValue;\n}\nexport function getNonEmptyValue(possibleValues) {\n    for (var _i = 0, possibleValues_2 = possibleValues; _i < possibleValues_2.length; _i++) {\n        var value = possibleValues_2[_i];\n        if (value && value.trim() !== '') {\n            return value;\n        }\n    }\n    return undefined;\n}\nexport var parseConvo = function (_a) {\n    var _b, _c;\n    var endpoint = _a.endpoint, endpointType = _a.endpointType, conversation = _a.conversation, possibleValues = _a.possibleValues;\n    var schema = endpointSchemas[endpoint];\n    if (!schema && !endpointType) {\n        throw new Error(\"Unknown endpoint: \".concat(endpoint));\n    }\n    else if (!schema && endpointType) {\n        schema = endpointSchemas[endpointType];\n    }\n    // if (defaultSchema && schemaCreators[endpoint]) {\n    //   schema = schemaCreators[endpoint](defaultSchema);\n    // }\n    var convo = schema === null || schema === void 0 ? void 0 : schema.parse(conversation);\n    var _d = possibleValues !== null && possibleValues !== void 0 ? possibleValues : {}, models = _d.models, secondaryModels = _d.secondaryModels;\n    if (models && convo) {\n        convo.model = (_b = getFirstDefinedValue(models)) !== null && _b !== void 0 ? _b : convo.model;\n    }\n    if (secondaryModels && (convo === null || convo === void 0 ? void 0 : convo.agentOptions)) {\n        convo.agentOptions.model = (_c = getFirstDefinedValue(secondaryModels)) !== null && _c !== void 0 ? _c : convo.agentOptions.model;\n    }\n    return convo;\n};\n/** Match GPT followed by digit, optional decimal, and optional suffix\n *\n * Examples: gpt-4, gpt-4o, gpt-4.5, gpt-5a, etc. */\nvar extractGPTVersion = function (modelStr) {\n    var gptMatch = modelStr.match(/gpt-(\\d+(?:\\.\\d+)?)([a-z])?/i);\n    if (gptMatch) {\n        var version = gptMatch[1];\n        var suffix = gptMatch[2] || '';\n        return \"GPT-\".concat(version).concat(suffix);\n    }\n    return '';\n};\n/** Match omni models (o1, o3, etc.), \"o\" followed by a digit, possibly with decimal */\nvar extractOmniVersion = function (modelStr) {\n    var omniMatch = modelStr.match(/\\bo(\\d+(?:\\.\\d+)?)\\b/i);\n    if (omniMatch) {\n        var version = omniMatch[1];\n        return \"o\".concat(version);\n    }\n    return '';\n};\nexport var getResponseSender = function (endpointOption) {\n    var _a;\n    var _m = endpointOption.model, _e = endpointOption.endpoint, endpointType = endpointOption.endpointType, _mdl = endpointOption.modelDisplayLabel, _cgl = endpointOption.chatGptLabel, _ml = endpointOption.modelLabel;\n    var endpoint = _e;\n    var model = _m !== null && _m !== void 0 ? _m : '';\n    var modelDisplayLabel = _mdl !== null && _mdl !== void 0 ? _mdl : '';\n    var chatGptLabel = _cgl !== null && _cgl !== void 0 ? _cgl : '';\n    var modelLabel = _ml !== null && _ml !== void 0 ? _ml : '';\n    if ([\n        EModelEndpoint.openAI,\n        EModelEndpoint.bedrock,\n        EModelEndpoint.gptPlugins,\n        EModelEndpoint.azureOpenAI,\n        EModelEndpoint.chatGPTBrowser,\n    ].includes(endpoint)) {\n        if (chatGptLabel) {\n            return chatGptLabel;\n        }\n        else if (modelLabel) {\n            return modelLabel;\n        }\n        else if (model && extractOmniVersion(model)) {\n            return extractOmniVersion(model);\n        }\n        else if (model && (model.includes('mistral') || model.includes('codestral'))) {\n            return 'Mistral';\n        }\n        else if (model && model.includes('deepseek')) {\n            return 'Deepseek';\n        }\n        else if (model && model.includes('gpt-')) {\n            var gptVersion = extractGPTVersion(model);\n            return gptVersion || 'GPT';\n        }\n        return (_a = alternateName[endpoint]) !== null && _a !== void 0 ? _a : 'ChatGPT';\n    }\n    if (endpoint === EModelEndpoint.anthropic) {\n        return modelLabel || 'Claude';\n    }\n    if (endpoint === EModelEndpoint.bedrock) {\n        return modelLabel || alternateName[endpoint];\n    }\n    if (endpoint === EModelEndpoint.google) {\n        if (modelLabel) {\n            return modelLabel;\n        }\n        else if ((model === null || model === void 0 ? void 0 : model.toLowerCase().includes('gemma')) === true) {\n            return 'Gemma';\n        }\n        return 'Gemini';\n    }\n    if (endpoint === EModelEndpoint.custom || endpointType === EModelEndpoint.custom) {\n        if (modelLabel) {\n            return modelLabel;\n        }\n        else if (chatGptLabel) {\n            return chatGptLabel;\n        }\n        else if (model && extractOmniVersion(model)) {\n            return extractOmniVersion(model);\n        }\n        else if (model && (model.includes('mistral') || model.includes('codestral'))) {\n            return 'Mistral';\n        }\n        else if (model && model.includes('deepseek')) {\n            return 'Deepseek';\n        }\n        else if (model && model.includes('gpt-')) {\n            var gptVersion = extractGPTVersion(model);\n            return gptVersion || 'GPT';\n        }\n        else if (modelDisplayLabel) {\n            return modelDisplayLabel;\n        }\n        return 'AI';\n    }\n    return '';\n};\nvar compactEndpointSchemas = (_b = {},\n    _b[EModelEndpoint.openAI] = openAISchema,\n    _b[EModelEndpoint.azureOpenAI] = openAISchema,\n    _b[EModelEndpoint.custom] = openAISchema,\n    _b[EModelEndpoint.assistants] = compactAssistantSchema,\n    _b[EModelEndpoint.azureAssistants] = compactAssistantSchema,\n    _b[EModelEndpoint.agents] = compactAgentsSchema,\n    _b[EModelEndpoint.google] = compactGoogleSchema,\n    _b[EModelEndpoint.bedrock] = bedrockInputSchema,\n    _b[EModelEndpoint.anthropic] = anthropicSchema,\n    _b[EModelEndpoint.gptPlugins] = compactPluginsSchema,\n    _b);\nexport var parseCompactConvo = function (_a) {\n    var _b;\n    var endpoint = _a.endpoint, endpointType = _a.endpointType, conversation = _a.conversation, possibleValues = _a.possibleValues;\n    if (!endpoint) {\n        throw new Error(\"undefined endpoint: \".concat(endpoint));\n    }\n    var schema = compactEndpointSchemas[endpoint];\n    if (!schema && !endpointType) {\n        throw new Error(\"Unknown endpoint: \".concat(endpoint));\n    }\n    else if (!schema && endpointType) {\n        schema = compactEndpointSchemas[endpointType];\n    }\n    if (!schema) {\n        throw new Error(\"Unknown endpointType: \".concat(endpointType));\n    }\n    var convo = schema.parse(conversation);\n    // const { models, secondaryModels } = possibleValues ?? {};\n    var models = (possibleValues !== null && possibleValues !== void 0 ? possibleValues : {}).models;\n    if (models && convo) {\n        convo.model = (_b = getFirstDefinedValue(models)) !== null && _b !== void 0 ? _b : convo.model;\n    }\n    // if (secondaryModels && convo.agentOptions) {\n    //   convo.agentOptionmodel = getFirstDefinedValue(secondaryModels) ?? convo.agentOptionmodel;\n    // }\n    return convo;\n};\nexport function parseTextParts(contentParts, skipReasoning) {\n    if (skipReasoning === void 0) { skipReasoning = false; }\n    var result = '';\n    for (var _i = 0, contentParts_1 = contentParts; _i < contentParts_1.length; _i++) {\n        var part = contentParts_1[_i];\n        if (!part.type) {\n            continue;\n        }\n        if (part.type === ContentTypes.TEXT) {\n            var textValue = typeof part.text === 'string' ? part.text : part.text.value;\n            if (result.length > 0 &&\n                textValue.length > 0 &&\n                result[result.length - 1] !== ' ' &&\n                textValue[0] !== ' ') {\n                result += ' ';\n            }\n            result += textValue;\n        }\n        else if (part.type === ContentTypes.THINK && !skipReasoning) {\n            var textValue = typeof part.think === 'string' ? part.think : '';\n            if (result.length > 0 &&\n                textValue.length > 0 &&\n                result[result.length - 1] !== ' ' &&\n                textValue[0] !== ' ') {\n                result += ' ';\n            }\n            result += textValue;\n        }\n    }\n    return result;\n}\nexport var SEPARATORS = ['.', '?', '!', '۔', '。', '‥', ';', '¡', '¿', '\\n', '```'];\nexport function findLastSeparatorIndex(text, separators) {\n    if (separators === void 0) { separators = SEPARATORS; }\n    var lastIndex = -1;\n    for (var _i = 0, separators_1 = separators; _i < separators_1.length; _i++) {\n        var separator = separators_1[_i];\n        var index = text.lastIndexOf(separator);\n        if (index > lastIndex) {\n            lastIndex = index;\n        }\n    }\n    return lastIndex;\n}\nexport function replaceSpecialVars(_a) {\n    var text = _a.text, user = _a.user;\n    var result = text;\n    if (!result) {\n        return result;\n    }\n    // e.g., \"2024-04-29 (1)\" (1=Monday)\n    var currentDate = dayjs().format('YYYY-MM-DD');\n    var dayNumber = dayjs().day();\n    var combinedDate = \"\".concat(currentDate, \" (\").concat(dayNumber, \")\");\n    result = result.replace(/{{current_date}}/gi, combinedDate);\n    var currentDatetime = dayjs().format('YYYY-MM-DD HH:mm:ss');\n    result = result.replace(/{{current_datetime}}/gi, \"\".concat(currentDatetime, \" (\").concat(dayNumber, \")\"));\n    var isoDatetime = dayjs().toISOString();\n    result = result.replace(/{{iso_datetime}}/gi, isoDatetime);\n    if (user && user.name) {\n        result = result.replace(/{{current_user}}/gi, user.name);\n    }\n    return result;\n}\n//# sourceMappingURL=parsers.js.map","references":["/Users/fairytale/Desktop/interview_projects_2025/LibreChat/node_modules/dayjs/index.d.ts","/Users/fairytale/Desktop/interview_projects_2025/LibreChat/node_modules/zod/dist/types/index.d.ts","/Users/fairytale/Desktop/interview_projects_2025/LibreChat/packages/data-provider/src/types/assistants.ts","/Users/fairytale/Desktop/interview_projects_2025/LibreChat/packages/data-provider/src/schemas.ts","/Users/fairytale/Desktop/interview_projects_2025/LibreChat/packages/data-provider/src/types.ts","/Users/fairytale/Desktop/interview_projects_2025/LibreChat/packages/data-provider/src/types/runs.ts","/Users/fairytale/Desktop/interview_projects_2025/LibreChat/packages/data-provider/src/schemas.ts","/Users/fairytale/Desktop/interview_projects_2025/LibreChat/packages/data-provider/src/bedrock.ts","/Users/fairytale/Desktop/interview_projects_2025/LibreChat/packages/data-provider/src/utils.ts","/Users/fairytale/Desktop/interview_projects_2025/LibreChat/packages/data-provider/src/config.ts"],"map":"{\"version\":3,\"file\":\"parsers.js\",\"sourceRoot\":\"\",\"sources\":[\"../../src/parsers.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/Users/fairytale/Desktop/interview_projects_2025/LibreChat/packages/data-provider/dist/types/parsers.d.ts","writeByteOrderMark":false,"text":"import type { ZodIssue } from 'zod';\nimport type * as a from './types/assistants';\nimport type * as s from './schemas';\nimport type * as t from './types';\nimport { EModelEndpoint } from './schemas';\nexport type EndpointSchemaKey = Exclude<EModelEndpoint, EModelEndpoint.chatGPTBrowser>;\n/** Get the enabled endpoints from the `ENDPOINTS` environment variable */\nexport declare function getEnabledEndpoints(): string[];\n/** Orders an existing EndpointsConfig object based on enabled endpoint/custom ordering */\nexport declare function orderEndpointsConfig(endpointsConfig: t.TEndpointsConfig): Record<string, t.TConfig | null | undefined>;\n/** Converts an array of Zod issues into a string. */\nexport declare function errorsToString(errors: ZodIssue[]): string;\nexport declare function getFirstDefinedValue(possibleValues: string[]): string | undefined;\nexport declare function getNonEmptyValue(possibleValues: string[]): string | undefined;\nexport type TPossibleValues = {\n    models: string[];\n    secondaryModels?: string[];\n};\nexport declare const parseConvo: ({ endpoint, endpointType, conversation, possibleValues, }: {\n    endpoint: EndpointSchemaKey;\n    endpointType?: EndpointSchemaKey | null | undefined;\n    conversation: Partial<s.TConversation | s.TPreset> | null;\n    possibleValues?: TPossibleValues | undefined;\n}) => s.TConversation | undefined;\nexport declare const getResponseSender: (endpointOption: t.TEndpointOption) => string;\nexport declare const parseCompactConvo: ({ endpoint, endpointType, conversation, possibleValues, }: {\n    endpoint?: EndpointSchemaKey | undefined;\n    endpointType?: EndpointSchemaKey | null | undefined;\n    conversation: Partial<s.TConversation | s.TPreset>;\n    possibleValues?: TPossibleValues | undefined;\n}) => s.TConversation | null;\nexport declare function parseTextParts(contentParts: a.TMessageContentParts[], skipReasoning?: boolean): string;\nexport declare const SEPARATORS: string[];\nexport declare function findLastSeparatorIndex(text: string, separators?: string[]): number;\nexport declare function replaceSpecialVars({ text, user }: {\n    text: string;\n    user?: t.TUser | null;\n}): string;\n"}}
