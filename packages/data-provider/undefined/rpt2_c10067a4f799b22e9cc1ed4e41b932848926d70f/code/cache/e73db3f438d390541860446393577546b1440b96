{"code":"import { __assign, __awaiter, __generator } from \"tslib\";\nimport { z } from 'zod';\nimport _axios from 'axios';\nimport { URL } from 'url';\nimport crypto from 'crypto';\nimport { load } from 'js-yaml';\nimport { AuthTypeEnum, AuthorizationTypeEnum } from './types/agents';\nimport { Tools } from './types/assistants';\nexport function sha1(input) {\n    return crypto.createHash('sha1').update(input).digest('hex');\n}\nexport function createURL(domain, path) {\n    var cleanDomain = domain.replace(/\\/$/, '');\n    var cleanPath = path.replace(/^\\//, '');\n    var fullURL = \"\".concat(cleanDomain, \"/\").concat(cleanPath);\n    return new URL(fullURL).toString();\n}\nvar schemaTypeHandlers = {\n    string: function (schema) {\n        if (schema.enum) {\n            return z.enum(schema.enum);\n        }\n        var stringSchema = z.string();\n        if (schema.minLength !== undefined) {\n            stringSchema = stringSchema.min(schema.minLength);\n        }\n        if (schema.maxLength !== undefined) {\n            stringSchema = stringSchema.max(schema.maxLength);\n        }\n        return stringSchema;\n    },\n    number: function (schema) {\n        var numberSchema = z.number();\n        if (schema.minimum !== undefined) {\n            numberSchema = numberSchema.min(schema.minimum);\n        }\n        if (schema.maximum !== undefined) {\n            numberSchema = numberSchema.max(schema.maximum);\n        }\n        return numberSchema;\n    },\n    integer: function (schema) { return schemaTypeHandlers.number(schema).int(); },\n    boolean: function () { return z.boolean(); },\n    array: function (schema) {\n        if (schema.items) {\n            var zodSchema = openAPISchemaToZod(schema.items);\n            if (zodSchema) {\n                return z.array(zodSchema);\n            }\n            return z.array(z.unknown());\n        }\n        return z.array(z.unknown());\n    },\n    object: function (schema) {\n        var shape = {};\n        if (schema.properties) {\n            Object.entries(schema.properties).forEach(function (_a) {\n                var key = _a[0], value = _a[1];\n                var zodSchema = openAPISchemaToZod(value);\n                shape[key] = zodSchema || z.unknown();\n                if (schema.required && schema.required.includes(key)) {\n                    shape[key] = shape[key].describe(value.description || '');\n                }\n                else {\n                    shape[key] = shape[key].optional().describe(value.description || '');\n                }\n            });\n        }\n        return z.object(shape);\n    },\n};\nfunction openAPISchemaToZod(schema) {\n    if (schema.type === 'object' && Object.keys(schema.properties || {}).length === 0) {\n        return undefined;\n    }\n    var handler = schemaTypeHandlers[schema.type] || (function () { return z.unknown(); });\n    return handler(schema);\n}\n/**\n * Class representing a function signature.\n */\nvar FunctionSignature = /** @class */ (function () {\n    function FunctionSignature(name, description, parameters, strict) {\n        this.name = name;\n        this.description = description;\n        this.parameters = parameters;\n        this.strict = strict !== null && strict !== void 0 ? strict : false;\n    }\n    FunctionSignature.prototype.toObjectTool = function () {\n        var parameters = __assign(__assign({}, this.parameters), { additionalProperties: this.strict ? false : undefined });\n        return {\n            type: Tools.function,\n            function: __assign({ name: this.name, description: this.description, parameters: parameters }, (this.strict ? { strict: this.strict } : {})),\n        };\n    };\n    return FunctionSignature;\n}());\nexport { FunctionSignature };\nvar RequestConfig = /** @class */ (function () {\n    function RequestConfig(domain, basePath, method, operation, isConsequential, contentType, parameterLocations) {\n        this.domain = domain;\n        this.basePath = basePath;\n        this.method = method;\n        this.operation = operation;\n        this.isConsequential = isConsequential;\n        this.contentType = contentType;\n        this.parameterLocations = parameterLocations;\n    }\n    return RequestConfig;\n}());\nvar RequestExecutor = /** @class */ (function () {\n    function RequestExecutor(config) {\n        this.config = config;\n        this.authHeaders = {};\n        this.path = config.basePath;\n    }\n    RequestExecutor.prototype.setParams = function (params) {\n        this.operationHash = sha1(JSON.stringify(params));\n        this.params = __assign({}, params);\n        if (this.config.parameterLocations) {\n            //Substituting “Path” Parameters:\n            for (var _i = 0, _a = Object.entries(params); _i < _a.length; _i++) {\n                var _b = _a[_i], key = _b[0], value = _b[1];\n                if (this.config.parameterLocations[key] === 'path') {\n                    var paramPattern = \"{\".concat(key, \"}\");\n                    if (this.path.includes(paramPattern)) {\n                        this.path = this.path.replace(paramPattern, encodeURIComponent(String(value)));\n                        delete this.params[key];\n                    }\n                }\n            }\n        }\n        else {\n            // Fallback: if no locations are defined, perform path substitution for all keys.\n            for (var _c = 0, _d = Object.entries(params); _c < _d.length; _c++) {\n                var _e = _d[_c], key = _e[0], value = _e[1];\n                var paramPattern = \"{\".concat(key, \"}\");\n                if (this.path.includes(paramPattern)) {\n                    this.path = this.path.replace(paramPattern, encodeURIComponent(String(value)));\n                    delete this.params[key];\n                }\n            }\n        }\n        return this;\n    };\n    RequestExecutor.prototype.setAuth = function (metadata) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, type, \n            /* API Key */\n            authorization_type, custom_auth_header, \n            /* OAuth */\n            authorization_url, client_url, scope, token_exchange_method, \n            /* API Key */\n            api_key, \n            /* OAuth */\n            oauth_client_id, oauth_client_secret, oauth_token_expires_at, _b, oauth_access_token, isApiKey, isOAuth, basicToken, now;\n            return __generator(this, function (_c) {\n                if (!metadata.auth) {\n                    return [2 /*return*/, this];\n                }\n                _a = metadata.auth, type = _a.type, authorization_type = _a.authorization_type, custom_auth_header = _a.custom_auth_header, authorization_url = _a.authorization_url, client_url = _a.client_url, scope = _a.scope, token_exchange_method = _a.token_exchange_method;\n                api_key = metadata.api_key, oauth_client_id = metadata.oauth_client_id, oauth_client_secret = metadata.oauth_client_secret, oauth_token_expires_at = metadata.oauth_token_expires_at, _b = metadata.oauth_access_token, oauth_access_token = _b === void 0 ? '' : _b;\n                isApiKey = api_key != null && api_key.length > 0 && type === AuthTypeEnum.ServiceHttp;\n                isOAuth = !!(oauth_client_id != null &&\n                    oauth_client_id &&\n                    oauth_client_secret != null &&\n                    oauth_client_secret &&\n                    type === AuthTypeEnum.OAuth &&\n                    authorization_url != null &&\n                    authorization_url &&\n                    client_url != null &&\n                    client_url &&\n                    scope != null &&\n                    scope &&\n                    token_exchange_method);\n                if (isApiKey && authorization_type === AuthorizationTypeEnum.Basic) {\n                    basicToken = Buffer.from(api_key).toString('base64');\n                    this.authHeaders['Authorization'] = \"Basic \".concat(basicToken);\n                }\n                else if (isApiKey && authorization_type === AuthorizationTypeEnum.Bearer) {\n                    this.authHeaders['Authorization'] = \"Bearer \".concat(api_key);\n                }\n                else if (isApiKey &&\n                    authorization_type === AuthorizationTypeEnum.Custom &&\n                    custom_auth_header != null &&\n                    custom_auth_header) {\n                    this.authHeaders[custom_auth_header] = api_key;\n                }\n                else if (isOAuth) {\n                    now = new Date();\n                    // 1. Check if token is set\n                    if (!oauth_access_token) {\n                        throw new Error('No access token found. Please log in first.');\n                    }\n                    // 2. Check if token is expired\n                    if (oauth_token_expires_at && now >= new Date(oauth_token_expires_at)) {\n                        // Optionally check refresh_token logic, or just prompt user to re-login\n                        throw new Error('Access token is expired. Please re-login.');\n                    }\n                    // If valid, use it\n                    this.authToken = oauth_access_token;\n                    this.authHeaders['Authorization'] = \"Bearer \".concat(this.authToken);\n                }\n                return [2 /*return*/, this];\n            });\n        });\n    };\n    RequestExecutor.prototype.execute = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var url, headers, method, axios, queryParams, bodyParams, _i, _a, key, loc, val;\n            return __generator(this, function (_b) {\n                url = createURL(this.config.domain, this.path);\n                headers = __assign(__assign({}, this.authHeaders), (this.config.contentType ? { 'Content-Type': this.config.contentType } : {}));\n                method = this.config.method.toLowerCase();\n                axios = _axios.create();\n                queryParams = {};\n                bodyParams = {};\n                if (this.config.parameterLocations && this.params) {\n                    for (_i = 0, _a = Object.keys(this.params); _i < _a.length; _i++) {\n                        key = _a[_i];\n                        loc = this.config.parameterLocations[key] || (method === 'get' ? 'query' : 'body');\n                        val = this.params[key];\n                        if (loc === 'query') {\n                            queryParams[key] = val;\n                        }\n                        else if (loc === 'header') {\n                            headers[key] = String(val);\n                        }\n                        else if (loc === 'body') {\n                            bodyParams[key] = val;\n                        }\n                    }\n                }\n                else if (this.params) {\n                    Object.assign(queryParams, this.params);\n                    Object.assign(bodyParams, this.params);\n                }\n                if (method === 'get') {\n                    return [2 /*return*/, axios.get(url, { headers: headers, params: queryParams })];\n                }\n                else if (method === 'post') {\n                    return [2 /*return*/, axios.post(url, bodyParams, { headers: headers, params: queryParams })];\n                }\n                else if (method === 'put') {\n                    return [2 /*return*/, axios.put(url, bodyParams, { headers: headers, params: queryParams })];\n                }\n                else if (method === 'delete') {\n                    return [2 /*return*/, axios.delete(url, { headers: headers, data: bodyParams, params: queryParams })];\n                }\n                else if (method === 'patch') {\n                    return [2 /*return*/, axios.patch(url, bodyParams, { headers: headers, params: queryParams })];\n                }\n                else {\n                    throw new Error(\"Unsupported HTTP method: \".concat(method));\n                }\n                return [2 /*return*/];\n            });\n        });\n    };\n    RequestExecutor.prototype.getConfig = function () {\n        return this.config;\n    };\n    return RequestExecutor;\n}());\nvar ActionRequest = /** @class */ (function () {\n    function ActionRequest(domain, path, method, operation, isConsequential, contentType, parameterLocations) {\n        this.config = new RequestConfig(domain, path, method, operation, isConsequential, contentType, parameterLocations);\n    }\n    Object.defineProperty(ActionRequest.prototype, \"domain\", {\n        // Add getters to maintain backward compatibility\n        get: function () {\n            return this.config.domain;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ActionRequest.prototype, \"path\", {\n        get: function () {\n            return this.config.basePath;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ActionRequest.prototype, \"method\", {\n        get: function () {\n            return this.config.method;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ActionRequest.prototype, \"operation\", {\n        get: function () {\n            return this.config.operation;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ActionRequest.prototype, \"isConsequential\", {\n        get: function () {\n            return this.config.isConsequential;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ActionRequest.prototype, \"contentType\", {\n        get: function () {\n            return this.config.contentType;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ActionRequest.prototype.createExecutor = function () {\n        return new RequestExecutor(this.config);\n    };\n    // Maintain backward compatibility by delegating to a new executor\n    ActionRequest.prototype.setParams = function (params) {\n        var executor = this.createExecutor();\n        executor.setParams(params);\n        return executor;\n    };\n    ActionRequest.prototype.setAuth = function (metadata) {\n        return __awaiter(this, void 0, void 0, function () {\n            var executor;\n            return __generator(this, function (_a) {\n                executor = this.createExecutor();\n                return [2 /*return*/, executor.setAuth(metadata)];\n            });\n        });\n    };\n    ActionRequest.prototype.execute = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var executor;\n            return __generator(this, function (_a) {\n                executor = this.createExecutor();\n                return [2 /*return*/, executor.execute()];\n            });\n        });\n    };\n    return ActionRequest;\n}());\nexport { ActionRequest };\nexport function resolveRef(obj, components) {\n    if ('$ref' in obj && components) {\n        var refPath = obj.$ref.replace(/^#\\/components\\//, '').split('/');\n        var resolved = components;\n        for (var _i = 0, refPath_1 = refPath; _i < refPath_1.length; _i++) {\n            var segment = refPath_1[_i];\n            if (typeof resolved === 'object' && resolved !== null && segment in resolved) {\n                resolved = resolved[segment];\n            }\n            else {\n                throw new Error(\"Could not resolve reference: \".concat(obj.$ref));\n            }\n        }\n        return resolveRef(resolved, components);\n    }\n    return obj;\n}\nfunction sanitizeOperationId(input) {\n    return input.replace(/[^a-zA-Z0-9_-]/g, '');\n}\n/**\n * Converts an OpenAPI spec to function signatures and request builders.\n */\nexport function openapiToFunction(openapiSpec, generateZodSchemas) {\n    var _a;\n    var _b, _c, _d, _e, _f, _g, _h;\n    if (generateZodSchemas === void 0) { generateZodSchemas = false; }\n    var functionSignatures = [];\n    var requestBuilders = {};\n    var zodSchemas = {};\n    var baseUrl = (_d = (_c = (_b = openapiSpec.servers) === null || _b === void 0 ? void 0 : _b[0]) === null || _c === void 0 ? void 0 : _c.url) !== null && _d !== void 0 ? _d : '';\n    // Iterate over each path and method in the OpenAPI spec\n    for (var _i = 0, _j = Object.entries(openapiSpec.paths); _i < _j.length; _i++) {\n        var _k = _j[_i], path = _k[0], methods = _k[1];\n        for (var _l = 0, _m = Object.entries(methods); _l < _m.length; _l++) {\n            var _o = _m[_l], method = _o[0], operation = _o[1];\n            var paramLocations = {};\n            var operationObj = operation;\n            // Operation ID is used as the function name\n            var defaultOperationId = \"\".concat(method, \"_\").concat(path);\n            var operationId = operationObj.operationId || sanitizeOperationId(defaultOperationId);\n            var description = operationObj.summary || operationObj.description || '';\n            var isStrict = (_e = operationObj['x-strict']) !== null && _e !== void 0 ? _e : false;\n            var parametersSchema = {\n                type: 'object',\n                properties: {},\n                required: [],\n            };\n            if (operationObj.parameters) {\n                for (var _p = 0, _q = (_f = operationObj.parameters) !== null && _f !== void 0 ? _f : []; _p < _q.length; _p++) {\n                    var param = _q[_p];\n                    var resolvedParam = resolveRef(param, openapiSpec.components);\n                    var paramName = resolvedParam.name;\n                    if (!paramName || !resolvedParam.schema) {\n                        continue;\n                    }\n                    var paramSchema = resolveRef(resolvedParam.schema, openapiSpec.components);\n                    parametersSchema.properties[paramName] = paramSchema;\n                    if (resolvedParam.required) {\n                        parametersSchema.required.push(paramName);\n                    }\n                    // Record the parameter location from the OpenAPI \"in\" field.\n                    paramLocations[paramName] =\n                        resolvedParam.in === 'query' ||\n                            resolvedParam.in === 'path' ||\n                            resolvedParam.in === 'header' ||\n                            resolvedParam.in === 'body'\n                            ? resolvedParam.in\n                            : 'query';\n                }\n            }\n            if (operationObj.requestBody) {\n                var requestBody = operationObj.requestBody;\n                var content = requestBody.content;\n                var contentType = Object.keys(content !== null && content !== void 0 ? content : {})[0];\n                var schema = (_g = content === null || content === void 0 ? void 0 : content[contentType]) === null || _g === void 0 ? void 0 : _g.schema;\n                var resolvedSchema = resolveRef(schema, openapiSpec.components);\n                parametersSchema.properties = __assign(__assign({}, parametersSchema.properties), resolvedSchema.properties);\n                if (resolvedSchema.required) {\n                    (_a = parametersSchema.required).push.apply(_a, resolvedSchema.required);\n                }\n                // Mark requestBody properties as belonging to the \"body\"\n                if (resolvedSchema.properties) {\n                    for (var key in resolvedSchema.properties) {\n                        paramLocations[key] = 'body';\n                    }\n                }\n            }\n            var functionSignature = new FunctionSignature(operationId, description, parametersSchema, isStrict);\n            functionSignatures.push(functionSignature);\n            var actionRequest = new ActionRequest(baseUrl, path, method, operationId, !!((_h = operationObj['x-openai-isConsequential']) !== null && _h !== void 0 ? _h : false), operationObj.requestBody ? 'application/json' : '', paramLocations);\n            requestBuilders[operationId] = actionRequest;\n            if (generateZodSchemas && Object.keys(parametersSchema.properties).length > 0) {\n                var schema = openAPISchemaToZod(parametersSchema);\n                if (schema) {\n                    zodSchemas[operationId] = schema;\n                }\n            }\n        }\n    }\n    return { functionSignatures: functionSignatures, requestBuilders: requestBuilders, zodSchemas: zodSchemas };\n}\n/**\n * Validates and parses an OpenAPI spec.\n */\nexport function validateAndParseOpenAPISpec(specString) {\n    var _a;\n    try {\n        var parsedSpec = void 0;\n        try {\n            parsedSpec = JSON.parse(specString);\n        }\n        catch (_b) {\n            parsedSpec = load(specString);\n        }\n        // Check for servers\n        if (!parsedSpec.servers ||\n            !Array.isArray(parsedSpec.servers) ||\n            parsedSpec.servers.length === 0) {\n            return { status: false, message: 'Could not find a valid URL in `servers`' };\n        }\n        if (!parsedSpec.servers[0].url) {\n            return { status: false, message: 'Could not find a valid URL in `servers`' };\n        }\n        // Check for paths\n        var paths = parsedSpec.paths;\n        if (!paths || typeof paths !== 'object' || Object.keys(paths).length === 0) {\n            return { status: false, message: 'No paths found in the OpenAPI spec.' };\n        }\n        var components = ((_a = parsedSpec.components) === null || _a === void 0 ? void 0 : _a.schemas) || {};\n        var messages = [];\n        for (var _i = 0, _c = Object.entries(paths); _i < _c.length; _i++) {\n            var _d = _c[_i], path = _d[0], methods = _d[1];\n            for (var _e = 0, _f = Object.entries(methods); _e < _f.length; _e++) {\n                var _g = _f[_e], httpMethod = _g[0], operation = _g[1];\n                // Ensure operation is a valid operation object\n                var responses = operation.responses;\n                if (typeof operation === 'object' && responses) {\n                    for (var _h = 0, _j = Object.entries(responses); _h < _j.length; _h++) {\n                        var _k = _j[_h], statusCode = _k[0], response = _k[1];\n                        var content = response.content;\n                        if (content && content['application/json'] && content['application/json'].schema) {\n                            var schema = content['application/json'].schema;\n                            if ('$ref' in schema && typeof schema.$ref === 'string') {\n                                var refName = schema.$ref.split('/').pop();\n                                if (refName && !components[refName]) {\n                                    messages.push(\"In context=('paths', '\".concat(path, \"', '\").concat(httpMethod, \"', '\").concat(statusCode, \"', 'response', 'content', 'application/json', 'schema'), reference to unknown component \").concat(refName, \"; using empty schema\"));\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        return {\n            status: true,\n            message: messages.join('\\n') || 'OpenAPI spec is valid.',\n            spec: parsedSpec,\n        };\n    }\n    catch (error) {\n        console.error(error);\n        return { status: false, message: 'Error parsing OpenAPI spec.' };\n    }\n}\n//# sourceMappingURL=actions.js.map","references":["/Users/fairytale/Desktop/interview_projects_2025/LibreChat/node_modules/zod/dist/types/index.d.ts","/Users/fairytale/Desktop/interview_projects_2025/LibreChat/node_modules/axios/index.d.ts","/Users/fairytale/Desktop/interview_projects_2025/LibreChat/node_modules/url/url.js","/Users/fairytale/Desktop/interview_projects_2025/LibreChat/node_modules/@types/js-yaml/index.d.ts","/Users/fairytale/Desktop/interview_projects_2025/LibreChat/packages/data-provider/src/types/agents.ts","/Users/fairytale/Desktop/interview_projects_2025/LibreChat/packages/data-provider/src/types/assistants.ts","/Users/fairytale/Desktop/interview_projects_2025/LibreChat/packages/data-provider/src/types/agents.ts","/Users/fairytale/Desktop/interview_projects_2025/LibreChat/node_modules/openapi-types/dist/index.d.ts","/Users/fairytale/Desktop/interview_projects_2025/LibreChat/packages/data-provider/src/types/assistants.ts"],"map":"{\"version\":3,\"file\":\"actions.js\",\"sourceRoot\":\"\",\"sources\":[\"../../src/actions.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/Users/fairytale/Desktop/interview_projects_2025/LibreChat/packages/data-provider/dist/types/actions.d.ts","writeByteOrderMark":false,"text":"import { z } from 'zod';\nimport type { ActionMetadata, ActionMetadataRuntime } from './types/agents';\nimport type { FunctionTool, Schema, Reference } from './types/assistants';\nimport { AuthorizationTypeEnum } from './types/agents';\nimport type { OpenAPIV3 } from 'openapi-types';\nexport type ParametersSchema = {\n    type: string;\n    properties: Record<string, Reference | Schema>;\n    required: string[];\n    additionalProperties?: boolean;\n};\nexport type OpenAPISchema = OpenAPIV3.SchemaObject & ParametersSchema & {\n    items?: OpenAPIV3.ReferenceObject | OpenAPIV3.SchemaObject;\n};\nexport type ApiKeyCredentials = {\n    api_key: string;\n    custom_auth_header?: string;\n    authorization_type?: AuthorizationTypeEnum;\n};\nexport type OAuthCredentials = {\n    tokenUrl: string;\n    clientId: string;\n    clientSecret: string;\n    scope: string;\n};\nexport type Credentials = ApiKeyCredentials | OAuthCredentials;\nexport declare function sha1(input: string): string;\nexport declare function createURL(domain: string, path: string): string;\n/**\n * Class representing a function signature.\n */\nexport declare class FunctionSignature {\n    name: string;\n    description: string;\n    parameters: ParametersSchema;\n    strict: boolean;\n    constructor(name: string, description: string, parameters: ParametersSchema, strict?: boolean);\n    toObjectTool(): FunctionTool;\n}\ndeclare class RequestConfig {\n    readonly domain: string;\n    readonly basePath: string;\n    readonly method: string;\n    readonly operation: string;\n    readonly isConsequential: boolean;\n    readonly contentType: string;\n    readonly parameterLocations?: Record<string, \"path\" | \"query\" | \"header\" | \"body\"> | undefined;\n    constructor(domain: string, basePath: string, method: string, operation: string, isConsequential: boolean, contentType: string, parameterLocations?: Record<string, \"path\" | \"query\" | \"header\" | \"body\"> | undefined);\n}\ndeclare class RequestExecutor {\n    private config;\n    path: string;\n    params?: Record<string, unknown>;\n    private operationHash?;\n    private authHeaders;\n    private authToken?;\n    constructor(config: RequestConfig);\n    setParams(params: Record<string, unknown>): this;\n    setAuth(metadata: ActionMetadataRuntime): Promise<this>;\n    execute(): Promise<import(\"axios\").AxiosResponse<any, any>>;\n    getConfig(): RequestConfig;\n}\nexport declare class ActionRequest {\n    private config;\n    constructor(domain: string, path: string, method: string, operation: string, isConsequential: boolean, contentType: string, parameterLocations?: Record<string, 'query' | 'path' | 'header' | 'body'>);\n    get domain(): string;\n    get path(): string;\n    get method(): string;\n    get operation(): string;\n    get isConsequential(): boolean;\n    get contentType(): string;\n    createExecutor(): RequestExecutor;\n    setParams(params: Record<string, unknown>): RequestExecutor;\n    setAuth(metadata: ActionMetadata): Promise<RequestExecutor>;\n    execute(): Promise<import(\"axios\").AxiosResponse<any, any>>;\n}\nexport declare function resolveRef<T extends OpenAPIV3.ReferenceObject | OpenAPIV3.SchemaObject | OpenAPIV3.ParameterObject | OpenAPIV3.RequestBodyObject>(obj: T, components?: OpenAPIV3.ComponentsObject): Exclude<T, OpenAPIV3.ReferenceObject>;\n/**\n * Converts an OpenAPI spec to function signatures and request builders.\n */\nexport declare function openapiToFunction(openapiSpec: OpenAPIV3.Document, generateZodSchemas?: boolean): {\n    functionSignatures: FunctionSignature[];\n    requestBuilders: Record<string, ActionRequest>;\n    zodSchemas?: Record<string, z.ZodTypeAny>;\n};\nexport type ValidationResult = {\n    status: boolean;\n    message: string;\n    spec?: OpenAPIV3.Document;\n};\n/**\n * Validates and parses an OpenAPI spec.\n */\nexport declare function validateAndParseOpenAPISpec(specString: string): ValidationResult;\nexport {};\n"}}
